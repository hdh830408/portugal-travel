<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portugal Travel Data Viewer</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#e8a84a">
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; padding: 20px; background-color: #f4f4f9; color: #333; }
        h1 { color: #1a0a00; border-bottom: 2px solid #e8a84a; padding-bottom: 10px; }
        .card { background: white; padding: 20px; margin-bottom: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .card h2 { margin-top: 0; color: #e8a84a; }
        pre { background: #2d2d2d; color: #ccc; padding: 15px; border-radius: 4px; overflow-x: auto; font-size: 14px; }
        
        /* í™”ë©´ ë¡œê·¸ ì°½ ìŠ¤íƒ€ì¼ */
        #log-window { 
            background: #1e1e1e; 
            color: #4caf50; 
            padding: 15px; 
            border-radius: 4px; 
            height: 400px; 
            overflow-y: auto; 
            font-family: 'Consolas', 'Monaco', monospace; 
            margin-bottom: 20px; 
            border: 1px solid #333; 
            white-space: pre-wrap; /* ì¤„ë°”ê¿ˆ ìœ ì§€ */
        }
        .btn { background: #e8a84a; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; font-weight: bold; margin-right: 10px; margin-bottom: 10px; }
        .btn:hover { background: #d69538; }
        .btn-clear { background: #666; }
        .status { font-weight: bold; color: green; }
    </style>
</head>
<body>
    <h1>ğŸ‡µğŸ‡¹ í¬ë¥´íˆ¬ê°ˆ ì—¬í–‰ ë°ì´í„° í™•ì¸</h1>
    <p>F12ë¥¼ ëˆŒëŸ¬ <strong>Console</strong> íƒ­ì—ì„œ ì „ì²´ ë°ì´í„°ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
    <p>ì•„ë˜ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ <strong>ë¡œê·¸ ì°½</strong>ì— ë°ì´í„°ê°€ ì¶œë ¥ë©ë‹ˆë‹¤.</p>
    
    <div id="app"></div>
    <!-- í™”ë©´ìƒ ë¡œê·¸ ë·°ì–´ -->
    <div id="log-window"></div>

    <!-- ì¡°ì‘ ë²„íŠ¼ -->
    <div style="margin-bottom: 20px;">
        <button class="btn" onclick="logData('PLACES')">ğŸ½ï¸ ë§›ì§‘/ì¥ì†Œ ë¡œê·¸</button>
        <button class="btn" onclick="logData('ITINERARY')">ğŸ“… ì¼ì • ë¡œê·¸</button>
        <button class="btn" onclick="logData('GUIDES')">ğŸ“– ê°€ì´ë“œ ë¡œê·¸</button>
        <button class="btn btn-clear" onclick="clearLog()">ğŸ—‘ï¸ ë¡œê·¸ ì§€ìš°ê¸°</button>
    </div>

    <!-- ë°ì´í„° íŒŒì¼ ë¡œë“œ (ìˆœì„œ ì¤‘ìš”: data -> guides) -->
    <script src="portugal_data.js"></script>
    <script src="portugal_guides.js"></script>

    <script>
        const app = document.getElementById('app');
        const logWindow = document.getElementById('log-window');

        function renderSection(title, data) {
            const section = document.createElement('div');
            section.className = 'card';
            
            // ë°ì´í„° ìš”ì•½ (ìµœëŒ€ 500ìê¹Œì§€ë§Œ ë¯¸ë¦¬ë³´ê¸°)
            const jsonPreview = JSON.stringify(data, null, 2);
            const previewText = jsonPreview.length > 500 ? jsonPreview.slice(0, 500) + '\n... (ì „ì²´ ë°ì´í„°ëŠ” ì½˜ì†” í™•ì¸)' : jsonPreview;

            section.innerHTML = `
                <h2>${title} <span style="font-size:0.8em; color:#666;">(${Array.isArray(data) ? data.length + ' items' : typeof data})</span></h2>
                <pre>${previewText}</pre>
            `;
            app.appendChild(section);
        }

        // í™”ë©´ì— í…ìŠ¤íŠ¸ë¥¼ ì¶œë ¥í•˜ëŠ” í•¨ìˆ˜
        function printToScreen(message) {
            logWindow.textContent += '> ' + message + '\n\n';
            logWindow.scrollTop = logWindow.scrollHeight; // ìŠ¤í¬ë¡¤ì„ í•­ìƒ ì•„ë˜ë¡œ
        }

        // ë°ì´í„° ë¡œê·¸ ì¶œë ¥ í•¨ìˆ˜
        function logData(type) {
            let data = null;
            if (type === 'PLACES') data = typeof PLACES !== 'undefined' ? PLACES : 'ë°ì´í„° ì—†ìŒ';
            if (type === 'ITINERARY') data = typeof ITINERARY !== 'undefined' ? ITINERARY : 'ë°ì´í„° ì—†ìŒ';
            if (type === 'GUIDES') data = typeof PLACE_GUIDES !== 'undefined' ? PLACE_GUIDES : 'ë°ì´í„° ì—†ìŒ';
            
            // ì½˜ì†”ì— ì „ì²´ ë°ì´í„° ì¶œë ¥
            console.log(`[${type}]`, data);
            printToScreen(`[${type} ì¡°íšŒ]`);
            printToScreen(JSON.stringify(data, null, 2));
        }

        function clearLog() {
            logWindow.textContent = '';
            printToScreen('ë¡œê·¸ê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.');
        }

        // ë°ì´í„° ë¡œë“œ í™•ì¸ ë° ë Œë”ë§
        if (typeof APP_CONFIG !== 'undefined') renderSection('APP_CONFIG', APP_CONFIG);
        if (typeof PLACES !== 'undefined') renderSection('PLACES', PLACES);
        if (typeof ITINERARY !== 'undefined') renderSection('ITINERARY', ITINERARY);
        if (typeof PLACE_GUIDES !== 'undefined') renderSection('PLACE_GUIDES', PLACE_GUIDES);
        if (typeof ROUTES !== 'undefined') renderSection('ROUTES', ROUTES);

        // Service Worker ë“±ë¡ (PWA í•„ìˆ˜)
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('./sw.js')
                .then(() => printToScreen('âœ… Service Worker ë“±ë¡ ì™„ë£Œ (ì˜¤í”„ë¼ì¸ ì§€ì› ê°€ëŠ¥)'))
                .catch(err => printToScreen('âŒ Service Worker ì‹¤íŒ¨: ' + err));
        }

        // ì´ˆê¸° ë©”ì‹œì§€
        printToScreen('ì‹œìŠ¤í…œ ì¤€ë¹„ ì™„ë£Œ. ë²„íŠ¼ì„ ëˆŒëŸ¬ ë°ì´í„°ë¥¼ í™•ì¸í•˜ì„¸ìš”.');
    </script>
</body>
</html>